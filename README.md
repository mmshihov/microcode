# Цель `Microcode`

Цель учебной программы `Microcode` - закрепление теоретических основ реализации арифметических операций.

Поставленная цель достигается за счет того, что:
* предлагается готовая операционная часть устройства, в структуре которой требуется разобраться и понять, как имеющимися средствами решить задачу (т.е. выполнить некоторую арифметическую операцию);
* моделируется работа центрального управляющего устройства, которое выдает задание и принимает результаты по определенным правилам;
* `Microcode` позволяет студенту задать собственные входные данные и выполнить пошаговое управление в режиме отладки;
* `Microcode` автоматически выполняет многократное тестирование правильности решения задачи по методу *черного ящика*;
* выполняемые `Microcode` тесты покрывают все ветки правильного алгоритма решения задачи (арифметической операции);
* тесты покрытия создаются `Microcode` на основе генератора случайных чисел;
* в `Microcode` заложена возможность генерации индивидуальных заданий, создаваемых за счет перестановки индексов управляющих сигналов `y`, что порождает `n!` возможных уникальных вариантов кодирования, при среднем `n >= 12`;
* в диалогах `Microcode` для ввода отладочных данных автоматически рассчитывается результат, а также выводятся десятичные представления числовых операндов, что дает возмножность глубже разобраться в форматах представления чисел, кодах и пр.


# Режимы работы `Microcode`

Их три:

* **Программирование**;
* **Отладка**;
* **Тестирование**.

Режим работы **Программирование** (**Programming**) предназначен для редактирования ПЗУ управляющей части. Как только редактирование ячейки ПЗУ завершается, соответствующие управляющие сигналы распространаяются по схеме, но ошибки управления не выдаются, даже если они есть.

Режим **Отладка** (**Debug**) предназначен для пошагового выполнения придуманного студентом алгоритма управления. В момент переключения в этот режим студенту предлагается ввести исходные данные. После того, как данные будут введены, **Microcode** переключается в пошаговый (потактный) режим тестирования. В случае ручного управления (**Управление/Ручное** (**MCU/Manual**)) пользователь выбирает в таблице **ПЗУ микрокоманд** строку с нужной командой и нажимает кнопку **Выполнить** (**Execute**) или горячую клавишу **F10**, что приводит к переключению в следующий такт. В случае автоматического управления (**Aвтомат Мили** (**Mili**), **Автомат Мура** (**Moore**)) текущая ячейка ПЗУ микропрограммы (строка таблицы) подсвечивается. Если в процессе выполнения теста фиксируется ошибка, то тестирование прекращается, выводится соответствующее сообщение, и выполняется переход в режим программирования. Если алгоритм выполнен безошибочно и в ЦУУ корректно выдан правильный результат, то выводится информационное сообщение об успешном прохождении отладочного теста.

В режиме **Тестирование** (**Autotest**) выполняется тестирование на случайным образом генерируемых входных данных. Состояние операционной части при этом не отображается. При ручном управлении автотесты выполняются в пошаговом режиме, в противном случае --- в автоматическом.

В режимах отладки и тестирования фиксируются следующие ошибки, приводящие к прекращению теста:
* выполняется чтение данных с **пустой** шины;
* выполняется выдача данных на **занятую** шину;
* нарушается протокол взаимодействия с ЦУУ, например, до выдачи результата, выдается сигнал **Свободен**;
* выдаются конфликтующие сигналы управления элементом памяти, например на регистр одновременно подаются управляющие сигналы сдвига и сброса.

Чтобы считать операнды, требуется выполнить следующие действия.

* Выдавать сигнал **Свободен** (`y0, Y=0x0001`) в течение некоторого числа тактов (не более 6), пока осведомительный сигнал **Задание на шине** (`p0`) не установится в 1.
* Сигнал **Задание на шине** выдается ЦУУ в течение одного такта, в этом такте также нужно выдавать сигнал **Свободен**.
* ЦУУ, в течение одного или нескольких тактов, следующих после такта, в котором выдавался сигнал **Задание на шине** выдает на шину фрагменты задания. Необходимо считать эти фрагменты в регистры.

Чтобы выдать результат, требуется выполнить следующие действия.
* Выдавать сигнал **Результат готов** (`y1, Y=0x0002`) в течение некоторого числа тактов (не более 6), пока осведомительный сигнал **Шина твоя** (`p0`) не установится в 1.
* Сигнал **Шина твоя** выдается ЦУУ в течение одного такта, в этом такте также нужно выдавать сигнал **Результат готов**.
* В течение одного или нескольких тактов, следующих после такта, в котором выдавался сигнал **Шина твоя** следует в определенном в задании порядке выдавать фрагменты результата на шину.
